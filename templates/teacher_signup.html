<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo.png') }}">
    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
    <script src="{{ url_for('static', filename='custom.js') }}"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">
  <style>
    :root {
      --pink-primary: #E91E63;
      --pink-light: #FFE8F0;
      --pink-background: #CC1454;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: black;
      font-weight: 500;
      font-size: 16px;
    }

    .logo img {
      height: 38px;
      width: auto;
    }

    .nav-links {
      display: flex;
      gap: 20px;
    }

    .nav-links a {
      text-decoration: none;
      color: #666;
      padding-bottom: 4px;
    }

    .nav-links a.active {
      color: var(--pink-primary);
      border-bottom: 2px solid var(--pink-primary);
    }

    .container {
      display: flex;
      gap: 40px;
      max-width: 900px;
      margin: 0 auto;
    }

    /* Biometric Section */
    .biometric-section {
      flex: 1;
      border: 1px solid #ef7096;
      border-radius: 8px;
    }

    .biometric-title {
      background: white;
      padding: 20px;
      border-radius: 8px 8px 0 0;
      text-align: center;
      font-size: 24px;
    }

    .camera-container {
      background: white;
      padding: 40px;
      border-top: 1px solid #ef7096;
      display: flex; /* Ensures proper alignment for .camera-box */
      align-items: center;
      justify-content: center;
      height: 300px; /* Set desired height for the container */
      width: 400px; /* Set desired width for the container */
      box-sizing: border-box; /* Includes padding and border in total size */
    }
    
    .camera-box {
      background: var(--pink-light);
      height: 100%; /* Matches the height of .camera-container */
      width: 100%; /* Matches the width of .camera-container */
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .form-container {
      background: #e30045;
      padding: 20px;
      border-radius: 0 0 8px 8px;
      color: white;
    }
    .regular-title {
      background: #e30045;
      padding:5px;
      text-align: center;
      font-size: 24px;
      margin-bottom:80px;
    }

    /* Regular Section */
    .regular-section {
      flex: 1;
      padding: 20px;
      border-radius: 8px;
      background: #e30045;
      color: white;
    }


    .input-with-icon {
      position: relative;
      margin-bottom: 30px;
      margin-top:30px;
    }

    .input-with-icon input {
      width: 100%;
      padding: 12px;
      padding-left: 35px;
      border: none;
      border-radius: 4px;
      box-sizing: border-box;
      background: white;
    }

    .input-with-icon i {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
    }

    .password-input {
      padding-right: 35px !important;
    }

    .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      background: none;
      border: none;
      color: #666;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
    }

    .form-group input {
      width: 100%;
      padding: 8px;
      border: none;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .sign-in-btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      background: white;
      color: #d02258;
    }

    .reset-password {
      text-align: right;
      margin-bottom: 15px;
    }

    .reset-password a {
      color: white;
      text-decoration: none;
    }

    .register-link {
      text-align: center;
      margin-top:150px;
    }

    .register-link a {
      color: white;
      text-decoration: none;
      border-bottom: 1px solid white;
    }
    .ai-tools {
      font-size: 16px; /* Slightly smaller font size */
      padding: 8px; /* Reduced padding */
      position: absolute;
      top: 50%; /* Center vertically */
      right: 10px; /* Align to the right */
      transform: translateY(-50%); /* Adjust for perfect vertical centering */
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px; /* Reduced space between elements */
  }
  
  .ai-tools h3 {
      margin-bottom: 15px; /* Reduced margin */
      text-align: center;
      color: #500323;
  }
  
  .square {
      width: 200px; /* Reduced width */
      height: 200px; /* Reduced height */
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #500323;
      color: white;
      font-size: 12px; /* Reduced font size */
      border-radius: 6px; /* Slightly smaller border radius */
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1); /* Slightly smaller shadow */
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
      text-align: center;
      padding: 6px; /* Reduced padding */
  }
  
  .square:hover {
      transform: scale(1.05); /* Smaller hover scaling */
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15); /* Adjusted hover shadow */
  }
  
  .square i {
      margin-right: 4px; /* Adjusted icon spacing */
      font-size: 16px; /* Reduced icon size */
  }
  
  .container {
    display: flex;
    justify-content: space-between;
  }
  
  .row {
    width: 100%;
    display: flex;
    justify-content: space-between;
  }
  
  .biometric-section,
  .regular-section {
    width: 50%;
  }
  
  .camera-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .camera-box {
    width: 50%;
  }
  
  .form-container {
    margin-top: 20px;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  .sign-in-btn {
    margin-top: 20px;
    background-color:rgb(219, 74, 67);
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
  }
  
  .sign-in-btn:hover {
    background-color:rgb(158, 45, 0);
  }

  .camera-box {
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  #live-feed {
    max-width: 100%; /* Ensures the image scales down if too wide */
    max-height: 100%; /* Ensures the image scales down if too tall */
    object-fit: cover; /* Ensures the image covers the box dimensions */
  }
  
  
  </style>
</head>
<body>
  <nav>
    <a href="#" class="logo">
      <img src="{{url_for('static',filename='logo.png')}}" alt="EqualEdge Logo">
      <span>EqualEdge</span>
    </a>
    <div class="nav-links">
      <a href="{{url_for('home')}}" class="active">Home</a>
      <a href="#">Classrooms</a>
      <a href="#">To do</a>

    </div>
  </nav>

  <div class="container">
    <div class="row">
      <!-- Biometric Sign-Up Section (Left) -->
      <div class="col-md-6 biometric-section" id="biometric-section">
        <form id="signup-form" method="POST" action="/teacher-signup">
          <div class="biometric-title">Biometric Sign Up for teachers</div>
          <div class="camera-container">
            <div class="camera-box">
              <div class="container mt-4">
                {% with messages = get_flashed_messages(with_categories=true) %}
                  {% if messages %}
                    <div class="alert-container">
                      {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                          {{ message }}
                        </div>
                      {% endfor %}
                    </div>
                  {% endif %}
                {% endwith %}
                <img id="live-feed" src="{{ url_for('video_feed') }}" height=290,width=390 alt="Live Camera Feed">
              </div>
            </div>
          </div>
          
          <div class="form-container">
            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" name="name" id="biometric-name" placeholder="Enter your name" required>
            </div>
            <div class="form-group">
              <label for="age">Age:</label>
              <input type="number" name="age" id="biometric-age" placeholder="Enter your age" required>
            </div>
            <div class="form-group">
              <label for="usn">Teacher USN:</label>
              <input type="text" name="usn" id="biometric-usn" placeholder="Enter your USN" required>
            </div>
            <div class="form-group">
              <label for="institution">Name of Institution:</label>
              <input type="text" name="institution" id="biometric-institution" placeholder="Enter institution name" required>
            </div>
          </div>
  
          <button type="submit" class="sign-in-btn">Submit</button>
        </form>
      </div>
  
      <!-- Regular Sign-Up Section (Right) -->
      <div class="col-md-6 regular-section">
        <form id="signup-form" method="POST" action="/teacher_signup2">
          <div class="biometric-title">Regular Sign Up</div>
          
          <div class="form-container">
            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" name="name" id="regular-name" placeholder="Enter your name" required>
            </div>
            <div class="form-group">
              <label for="age">Age:</label>
              <input type="number" name="age" id="regular-age" placeholder="Enter your age" required>
            </div>
            <div class="form-group">
              <label for="usn">Teacher USN:</label>
              <input type="text" name="usn" id="regular-usn" placeholder="Enter your USN" required>
            </div>
            <div class="form-group">
              <label for="institution">Name of Institution:</label>
              <input type="text" name="institution" id="regular-institution" placeholder="Enter institution name" required>
            </div>
          </div>
          
          <button type="submit" class="sign-in-btn">Submit</button>
        </form>
      </div>
    </div>
  </div>
  

  <div class="settings-container">
    <div class="settings-btn" onclick="toggleDropdown('fontDropdown')">Font</div>
    <div class="dropdown" id="fontDropdown">
        <button onclick="setFont('Arial')">Arial</button>
        <button onclick="setFont('Courier New')">Courier New</button>
        <button onclick="setFont('Georgia')">Georgia</button>
    </div>

    <div class="settings-btn" onclick="toggleSlider('fontSizeSlider')">Font Size</div>
    <div class="slider" id="fontSizeSlider">
        <input type="range" min="10" max="50" value="16" onchange="setFontSize(this.value)">
        <p>Font Size: <span id="fontSizeValue">16px</span></p>
    </div>

    <div class="settings-btn" onclick="toggleSlider('contrastSlider')">Contrast</div>
    <div class="slider" id="contrastSlider">
        <input type="range" min="0.5" max="2" value="1" step="0.1" onchange="setContrast(this.value)">
        <p>Contrast: <span id="contrastValue">1</span></p>
    </div>
</div>
<div class="ai-tools">
  <h3>AI Tools</h3>
  <div class="square">
      <i class="fas fa-robot"></i>
      <span>Mitra</span>
  </div>
  <div class="square">
      <input type="text" id="voiceInput" placeholder="Enter your command" />
      <button onclick="sendVoiceCommand(event)">Submit</button>
      <span id="micIcon" style="cursor: pointer;" onclick="startVoiceRecognition()">ðŸŽ¤</span> <!-- Microphone icon -->
      <button id="stopButton" style="display: none;" onclick="stopVoiceRecognition(event)">Stop</button> <!-- Stop button -->
  </div>
  
  <div id="result"></div>
</div>


<script>
  //anvaya--------------------------------------------------------
  (() => {
      let recognition;
      let timeoutId;
      let pauseTimer;
  
      function initializeSpeechRecognition() {
          if (!recognition) {
              recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
              recognition.lang = 'en-US';
              recognition.interimResults = false;
              recognition.maxAlternatives = 1;
              recognition.continuous = false;
  
              recognition.onresult = function (event) {
                  const transcript = event.results[0][0].transcript.toLowerCase();
                  console.log("Recognized command:", transcript);
                  document.getElementById("voiceInput").value = transcript;
  
                  fetch('/process_command', {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify({ command: transcript }),
                  })
                      .then((response) => response.json())
                      .then((data) => {
                          if (data.redirect_url) {
                              window.location.href = data.redirect_url;
                          }
                      })
                      .catch((err) => console.error("Error:", err));
              };
  
              recognition.onerror = function (event) {
                  console.error("Error occurred in recognition:", event.error);
              };
  
              recognition.onend = function () {
                  console.log("Speech recognition ended.");
                  if (!pauseTimer) recognition.start();
              };
          }
      }
  
      window.startVoiceRecognition = function () {
          initializeSpeechRecognition();
          try {
              recognition.start();
              console.log("Speech recognition started.");
              document.getElementById("anvaya-item").classList.add("flickering");
  
              timeoutId = setTimeout(() => {
                  stopVoiceRecognition();
              }, 5000);
          } catch (error) {
              console.error("Error starting SpeechRecognition:", error);
          }
      };
  
      function stopVoiceRecognition() {
          if (recognition) {
              recognition.stop();
              console.log("Speech recognition stopped.");
          }
          resetUI();
      }
  
      function resetUI() {
          document.getElementById("anvaya-item").classList.remove("flickering");
      }
  
      document.addEventListener("keydown", function (event) {
          if (event.key === "Escape") {
              event.preventDefault();
              window.startVoiceRecognition();
          }
      });
  
      function resetPauseTimer() {
          if (pauseTimer) clearTimeout(pauseTimer);
          pauseTimer = setTimeout(() => {
              stopVoiceRecognition();
          }, 5000);
      }
  })();
  </script>
</body>
</html>